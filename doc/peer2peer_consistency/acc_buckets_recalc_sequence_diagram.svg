<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="1642.5px" preserveAspectRatio="none" style="width:1489px;height:1642px;background:#FFFFFF;" version="1.1" viewBox="0 0 1489 1642" width="1489.5px" zoomAndPan="magnify"><defs/><g><rect fill="#DDDDDD" height="1614.457" style="stroke:#181818;stroke-width:0.75;" width="576.1582" x="152.2888" y="9"/><text fill="#000000" font-family="sans-serif" font-size="19.5" font-weight="bold" lengthAdjust="spacing" textLength="91.5205" x="394.6077" y="27.1003">ingester</text><rect fill="#DDDDDD" height="1614.457" style="stroke:#181818;stroke-width:0.75;" width="729.8811" x="748.2722" y="9"/><text fill="#000000" font-family="sans-serif" font-size="19.5" font-weight="bold" lengthAdjust="spacing" textLength="95.5957" x="1065.4149" y="27.1003">RocksDB</text><rect fill="none" height="69.3984" style="stroke:#000000;stroke-width:2.25;" width="1029.7573" x="282.8071" y="422.2852"/><rect fill="none" height="268.3945" style="stroke:#000000;stroke-width:2.25;" width="569.7173" x="15" y="577.3828"/><rect fill="none" height="155.2969" style="stroke:#000000;stroke-width:2.25;" width="426.4285" x="143.2888" y="679.9805"/><line style="stroke:#181818;stroke-width:0.75;stroke-dasharray:5.0,5.0;" x1="79.5" x2="79.5" y1="155.5898" y2="1501.0664"/><line style="stroke:#181818;stroke-width:0.75;stroke-dasharray:5.0,5.0;" x1="200.2888" x2="200.2888" y1="155.5898" y2="1501.0664"/><line style="stroke:#181818;stroke-width:0.75;stroke-dasharray:5.0,5.0;" x1="357.8071" x2="357.8071" y1="155.5898" y2="1501.0664"/><line style="stroke:#181818;stroke-width:0.75;stroke-dasharray:5.0,5.0;" x1="477.7822" x2="477.7822" y1="155.5898" y2="1501.0664"/><line style="stroke:#181818;stroke-width:0.75;stroke-dasharray:5.0,5.0;" x1="656.6404" x2="656.6404" y1="155.5898" y2="1501.0664"/><line style="stroke:#181818;stroke-width:0.75;stroke-dasharray:5.0,5.0;" x1="799.2722" x2="799.2722" y1="155.5898" y2="1501.0664"/><line style="stroke:#181818;stroke-width:0.75;stroke-dasharray:5.0,5.0;" x1="1017.4307" x2="1017.4307" y1="155.5898" y2="1501.0664"/><line style="stroke:#181818;stroke-width:0.75;stroke-dasharray:5.0,5.0;" x1="1134.1553" x2="1134.1553" y1="155.5898" y2="1501.0664"/><line style="stroke:#181818;stroke-width:0.75;stroke-dasharray:5.0,5.0;" x1="1249.9058" x2="1249.9058" y1="155.5898" y2="1501.0664"/><line style="stroke:#181818;stroke-width:0.75;stroke-dasharray:5.0,5.0;" x1="1392.0645" x2="1392.0645" y1="155.5898" y2="1501.0664"/><path d="M37.5,91.6992 L123.5596,91.6992 C131.0596,91.6992 131.0596,123.6445 131.0596,123.6445 C131.0596,123.6445 131.0596,155.5898 123.5596,155.5898 L37.5,155.5898 C30,155.5898 30,123.6445 30,123.6445 C30,123.6445 30,91.6992 37.5,91.6992 " fill="#E2E2F0" style="stroke:#181818;stroke-width:0.75;"/><path d="M123.5596,91.6992 C116.0596,91.6992 116.0596,123.6445 116.0596,123.6445 C116.0596,155.5898 123.5596,155.5898 123.5596,155.5898 " fill="none" style="stroke:#181818;stroke-width:0.75;"/><text fill="#000000" font-family="sans-serif" font-size="21" lengthAdjust="spacing" textLength="71.0596" x="37.5" y="118.6919">Solana</text><text fill="#000000" font-family="sans-serif" font-size="21" lengthAdjust="spacing" textLength="47.3013" x="49.3792" y="143.1372">data</text><path d="M37.5,1499.5664 L123.5596,1499.5664 C131.0596,1499.5664 131.0596,1531.5117 131.0596,1531.5117 C131.0596,1531.5117 131.0596,1563.457 123.5596,1563.457 L37.5,1563.457 C30,1563.457 30,1531.5117 30,1531.5117 C30,1531.5117 30,1499.5664 37.5,1499.5664 " fill="#E2E2F0" style="stroke:#181818;stroke-width:0.75;"/><path d="M123.5596,1499.5664 C116.0596,1499.5664 116.0596,1531.5117 116.0596,1531.5117 C116.0596,1563.457 123.5596,1563.457 123.5596,1563.457 " fill="none" style="stroke:#181818;stroke-width:0.75;"/><text fill="#000000" font-family="sans-serif" font-size="21" lengthAdjust="spacing" textLength="71.0596" x="37.5" y="1526.5591">Solana</text><text fill="#000000" font-family="sans-serif" font-size="21" lengthAdjust="spacing" textLength="47.3013" x="49.3792" y="1551.0044">data</text><text fill="#000000" font-family="sans-serif" font-size="21" lengthAdjust="spacing" textLength="71.0596" x="161.5649" y="126.1919">Solana</text><text fill="#000000" font-family="sans-serif" font-size="21" lengthAdjust="spacing" textLength="77.6118" x="158.2888" y="150.6372">Service</text><ellipse cx="201.5947" cy="82.6992" fill="#E2E2F0" rx="18" ry="18" style="stroke:#181818;stroke-width:0.75;"/><polygon fill="#181818" points="195.5947,64.6992,204.5947,57.1992,201.5947,64.6992,204.5947,72.1992,195.5947,64.6992" style="stroke:#181818;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="21" lengthAdjust="spacing" textLength="71.0596" x="161.5649" y="1519.0591">Solana</text><text fill="#000000" font-family="sans-serif" font-size="21" lengthAdjust="spacing" textLength="77.6118" x="158.2888" y="1543.5044">Service</text><ellipse cx="201.5947" cy="1572.457" fill="#E2E2F0" rx="18" ry="18" style="stroke:#181818;stroke-width:0.75;"/><polygon fill="#181818" points="195.5947,1554.457,204.5947,1546.957,201.5947,1554.457,204.5947,1561.957,195.5947,1554.457" style="stroke:#181818;stroke-width:1.5;"/><rect fill="#E2E2F0" height="69.8906" rx="3.75" ry="3.75" style="stroke:#181818;stroke-width:0.75;" width="122.9751" x="297.8071" y="84.1992"/><text fill="#000000" font-family="sans-serif" font-size="21" lengthAdjust="spacing" textLength="85.1587" x="316.7153" y="114.1919">Account</text><text fill="#000000" font-family="sans-serif" font-size="21" lengthAdjust="spacing" textLength="101.9751" x="308.3071" y="138.6372">Processor</text><rect fill="#E2E2F0" height="69.8906" rx="3.75" ry="3.75" style="stroke:#181818;stroke-width:0.75;" width="122.9751" x="297.8071" y="1499.5664"/><text fill="#000000" font-family="sans-serif" font-size="21" lengthAdjust="spacing" textLength="85.1587" x="316.7153" y="1529.5591">Account</text><text fill="#000000" font-family="sans-serif" font-size="21" lengthAdjust="spacing" textLength="101.9751" x="308.3071" y="1554.0044">Processor</text><path d="M443.2822,116.1445 L514.5557,116.1445 C522.0557,116.1445 522.0557,135.8672 522.0557,135.8672 C522.0557,135.8672 522.0557,155.5898 514.5557,155.5898 L443.2822,155.5898 C435.7822,155.5898 435.7822,135.8672 435.7822,135.8672 C435.7822,135.8672 435.7822,116.1445 443.2822,116.1445 " fill="#E2E2F0" style="stroke:#181818;stroke-width:0.75;"/><path d="M514.5557,116.1445 C507.0557,116.1445 507.0557,135.8672 507.0557,135.8672 C507.0557,155.5898 514.5557,155.5898 514.5557,155.5898 " fill="none" style="stroke:#181818;stroke-width:0.75;"/><text fill="#000000" font-family="sans-serif" font-size="21" lengthAdjust="spacing" textLength="56.2734" x="443.2822" y="143.1372">mpsc</text><path d="M443.2822,1499.5664 L514.5557,1499.5664 C522.0557,1499.5664 522.0557,1519.2891 522.0557,1519.2891 C522.0557,1519.2891 522.0557,1539.0117 514.5557,1539.0117 L443.2822,1539.0117 C435.7822,1539.0117 435.7822,1519.2891 435.7822,1519.2891 C435.7822,1519.2891 435.7822,1499.5664 443.2822,1499.5664 " fill="#E2E2F0" style="stroke:#181818;stroke-width:0.75;"/><path d="M514.5557,1499.5664 C507.0557,1499.5664 507.0557,1519.2891 507.0557,1519.2891 C507.0557,1539.0117 514.5557,1539.0117 514.5557,1539.0117 " fill="none" style="stroke:#181818;stroke-width:0.75;"/><text fill="#000000" font-family="sans-serif" font-size="21" lengthAdjust="spacing" textLength="56.2734" x="443.2822" y="1526.5591">mpsc</text><rect fill="#E2E2F0" height="69.8906" rx="3.75" ry="3.75" style="stroke:#181818;stroke-width:0.75;" width="130.3066" x="592.1404" y="84.1992"/><text fill="#000000" font-family="sans-serif" font-size="21" lengthAdjust="spacing" textLength="109.3066" x="602.6404" y="114.1919">Checksum</text><text fill="#000000" font-family="sans-serif" font-size="21" lengthAdjust="spacing" textLength="106.6406" x="603.9734" y="138.6372">Calculator</text><rect fill="#E2E2F0" height="69.8906" rx="3.75" ry="3.75" style="stroke:#181818;stroke-width:0.75;" width="130.3066" x="592.1404" y="1499.5664"/><text fill="#000000" font-family="sans-serif" font-size="21" lengthAdjust="spacing" textLength="109.3066" x="602.6404" y="1529.5591">Checksum</text><text fill="#000000" font-family="sans-serif" font-size="21" lengthAdjust="spacing" textLength="106.6406" x="603.9734" y="1554.0044">Calculator</text><text fill="#000000" font-family="sans-serif" font-size="21" lengthAdjust="spacing" textLength="68.3423" x="761.1833" y="126.1919">Assets</text><text fill="#000000" font-family="sans-serif" font-size="21" lengthAdjust="spacing" textLength="82.1646" x="754.2722" y="150.6372">Storage</text><path d="M772.8545,52.6992 C772.8545,37.6992 799.8545,37.6992 799.8545,37.6992 C799.8545,37.6992 826.8545,37.6992 826.8545,52.6992 L826.8545,91.6992 C826.8545,106.6992 799.8545,106.6992 799.8545,106.6992 C799.8545,106.6992 772.8545,106.6992 772.8545,91.6992 L772.8545,52.6992 " fill="#E2E2F0" style="stroke:#181818;stroke-width:2.25;"/><path d="M772.8545,52.6992 C772.8545,67.6992 799.8545,67.6992 799.8545,67.6992 C799.8545,67.6992 826.8545,67.6992 826.8545,52.6992 " fill="none" style="stroke:#181818;stroke-width:2.25;"/><text fill="#000000" font-family="sans-serif" font-size="21" lengthAdjust="spacing" textLength="68.3423" x="761.1833" y="1519.0591">Assets</text><text fill="#000000" font-family="sans-serif" font-size="21" lengthAdjust="spacing" textLength="82.1646" x="754.2722" y="1543.5044">Storage</text><path d="M772.8545,1563.457 C772.8545,1548.457 799.8545,1548.457 799.8545,1548.457 C799.8545,1548.457 826.8545,1548.457 826.8545,1563.457 L826.8545,1602.457 C826.8545,1617.457 799.8545,1617.457 799.8545,1617.457 C799.8545,1617.457 772.8545,1617.457 772.8545,1602.457 L772.8545,1563.457 " fill="#E2E2F0" style="stroke:#181818;stroke-width:2.25;"/><path d="M772.8545,1563.457 C772.8545,1578.457 799.8545,1578.457 799.8545,1578.457 C799.8545,1578.457 826.8545,1578.457 826.8545,1563.457 " fill="none" style="stroke:#181818;stroke-width:2.25;"/><text fill="#000000" font-family="sans-serif" font-size="21" lengthAdjust="spacing" textLength="85.1587" x="970.9636" y="126.1919">Account</text><text fill="#000000" font-family="sans-serif" font-size="21" lengthAdjust="spacing" textLength="88.2246" x="969.4307" y="150.6372">changes</text><path d="M991.043,52.6992 C991.043,37.6992 1018.043,37.6992 1018.043,37.6992 C1018.043,37.6992 1045.043,37.6992 1045.043,52.6992 L1045.043,91.6992 C1045.043,106.6992 1018.043,106.6992 1018.043,106.6992 C1018.043,106.6992 991.043,106.6992 991.043,91.6992 L991.043,52.6992 " fill="#E2E2F0" style="stroke:#181818;stroke-width:2.25;"/><path d="M991.043,52.6992 C991.043,67.6992 1018.043,67.6992 1018.043,67.6992 C1018.043,67.6992 1045.043,67.6992 1045.043,52.6992 " fill="none" style="stroke:#181818;stroke-width:2.25;"/><text fill="#000000" font-family="sans-serif" font-size="21" lengthAdjust="spacing" textLength="85.1587" x="970.9636" y="1519.0591">Account</text><text fill="#000000" font-family="sans-serif" font-size="21" lengthAdjust="spacing" textLength="88.2246" x="969.4307" y="1543.5044">changes</text><path d="M991.043,1563.457 C991.043,1548.457 1018.043,1548.457 1018.043,1548.457 C1018.043,1548.457 1045.043,1548.457 1045.043,1563.457 L1045.043,1602.457 C1045.043,1617.457 1018.043,1617.457 1018.043,1617.457 C1018.043,1617.457 991.043,1617.457 991.043,1602.457 L991.043,1563.457 " fill="#E2E2F0" style="stroke:#181818;stroke-width:2.25;"/><path d="M991.043,1563.457 C991.043,1578.457 1018.043,1578.457 1018.043,1578.457 C1018.043,1578.457 1045.043,1578.457 1045.043,1563.457 " fill="none" style="stroke:#181818;stroke-width:2.25;"/><text fill="#000000" font-family="sans-serif" font-size="21" lengthAdjust="spacing" textLength="85.1587" x="1087.9512" y="126.1919">Account</text><text fill="#000000" font-family="sans-serif" font-size="21" lengthAdjust="spacing" textLength="97.7505" x="1081.6553" y="150.6372">last state</text><path d="M1108.0305,52.6992 C1108.0305,37.6992 1135.0305,37.6992 1135.0305,37.6992 C1135.0305,37.6992 1162.0305,37.6992 1162.0305,52.6992 L1162.0305,91.6992 C1162.0305,106.6992 1135.0305,106.6992 1135.0305,106.6992 C1135.0305,106.6992 1108.0305,106.6992 1108.0305,91.6992 L1108.0305,52.6992 " fill="#E2E2F0" style="stroke:#181818;stroke-width:2.25;"/><path d="M1108.0305,52.6992 C1108.0305,67.6992 1135.0305,67.6992 1135.0305,67.6992 C1135.0305,67.6992 1162.0305,67.6992 1162.0305,52.6992 " fill="none" style="stroke:#181818;stroke-width:2.25;"/><text fill="#000000" font-family="sans-serif" font-size="21" lengthAdjust="spacing" textLength="85.1587" x="1087.9512" y="1519.0591">Account</text><text fill="#000000" font-family="sans-serif" font-size="21" lengthAdjust="spacing" textLength="97.7505" x="1081.6553" y="1543.5044">last state</text><path d="M1108.0305,1563.457 C1108.0305,1548.457 1135.0305,1548.457 1135.0305,1548.457 C1135.0305,1548.457 1162.0305,1548.457 1162.0305,1563.457 L1162.0305,1602.457 C1162.0305,1617.457 1135.0305,1617.457 1135.0305,1617.457 C1135.0305,1617.457 1108.0305,1617.457 1108.0305,1602.457 L1108.0305,1563.457 " fill="#E2E2F0" style="stroke:#181818;stroke-width:2.25;"/><path d="M1108.0305,1563.457 C1108.0305,1578.457 1135.0305,1578.457 1135.0305,1578.457 C1135.0305,1578.457 1162.0305,1578.457 1162.0305,1563.457 " fill="none" style="stroke:#181818;stroke-width:2.25;"/><text fill="#000000" font-family="sans-serif" font-size="21" lengthAdjust="spacing" textLength="85.1587" x="1203.4058" y="126.1919">Account</text><text fill="#000000" font-family="sans-serif" font-size="21" lengthAdjust="spacing" textLength="82.4414" x="1204.7644" y="150.6372">buckets</text><path d="M1223.4851,52.6992 C1223.4851,37.6992 1250.4851,37.6992 1250.4851,37.6992 C1250.4851,37.6992 1277.4851,37.6992 1277.4851,52.6992 L1277.4851,91.6992 C1277.4851,106.6992 1250.4851,106.6992 1250.4851,106.6992 C1250.4851,106.6992 1223.4851,106.6992 1223.4851,91.6992 L1223.4851,52.6992 " fill="#E2E2F0" style="stroke:#181818;stroke-width:2.25;"/><path d="M1223.4851,52.6992 C1223.4851,67.6992 1250.4851,67.6992 1250.4851,67.6992 C1250.4851,67.6992 1277.4851,67.6992 1277.4851,52.6992 " fill="none" style="stroke:#181818;stroke-width:2.25;"/><text fill="#000000" font-family="sans-serif" font-size="21" lengthAdjust="spacing" textLength="85.1587" x="1203.4058" y="1519.0591">Account</text><text fill="#000000" font-family="sans-serif" font-size="21" lengthAdjust="spacing" textLength="82.4414" x="1204.7644" y="1543.5044">buckets</text><path d="M1223.4851,1563.457 C1223.4851,1548.457 1250.4851,1548.457 1250.4851,1548.457 C1250.4851,1548.457 1277.4851,1548.457 1277.4851,1563.457 L1277.4851,1602.457 C1277.4851,1617.457 1250.4851,1617.457 1250.4851,1617.457 C1250.4851,1617.457 1223.4851,1617.457 1223.4851,1602.457 L1223.4851,1563.457 " fill="#E2E2F0" style="stroke:#181818;stroke-width:2.25;"/><path d="M1223.4851,1563.457 C1223.4851,1578.457 1250.4851,1578.457 1250.4851,1578.457 C1250.4851,1578.457 1277.4851,1578.457 1277.4851,1563.457 " fill="none" style="stroke:#181818;stroke-width:2.25;"/><text fill="#000000" font-family="sans-serif" font-size="21" lengthAdjust="spacing" textLength="85.1587" x="1345.2795" y="126.1919">Account</text><text fill="#000000" font-family="sans-serif" font-size="21" lengthAdjust="spacing" textLength="150.5889" x="1312.5645" y="150.6372">grand buckets</text><path d="M1365.3589,52.6992 C1365.3589,37.6992 1392.3589,37.6992 1392.3589,37.6992 C1392.3589,37.6992 1419.3589,37.6992 1419.3589,52.6992 L1419.3589,91.6992 C1419.3589,106.6992 1392.3589,106.6992 1392.3589,106.6992 C1392.3589,106.6992 1365.3589,106.6992 1365.3589,91.6992 L1365.3589,52.6992 " fill="#E2E2F0" style="stroke:#181818;stroke-width:2.25;"/><path d="M1365.3589,52.6992 C1365.3589,67.6992 1392.3589,67.6992 1392.3589,67.6992 C1392.3589,67.6992 1419.3589,67.6992 1419.3589,52.6992 " fill="none" style="stroke:#181818;stroke-width:2.25;"/><text fill="#000000" font-family="sans-serif" font-size="21" lengthAdjust="spacing" textLength="85.1587" x="1345.2795" y="1519.0591">Account</text><text fill="#000000" font-family="sans-serif" font-size="21" lengthAdjust="spacing" textLength="150.5889" x="1312.5645" y="1543.5044">grand buckets</text><path d="M1365.3589,1563.457 C1365.3589,1548.457 1392.3589,1548.457 1392.3589,1548.457 C1392.3589,1548.457 1419.3589,1548.457 1419.3589,1563.457 L1419.3589,1602.457 C1419.3589,1617.457 1392.3589,1617.457 1392.3589,1617.457 C1392.3589,1617.457 1365.3589,1617.457 1365.3589,1602.457 L1365.3589,1563.457 " fill="#E2E2F0" style="stroke:#181818;stroke-width:2.25;"/><path d="M1365.3589,1563.457 C1365.3589,1578.457 1392.3589,1578.457 1392.3589,1578.457 C1392.3589,1578.457 1419.3589,1578.457 1419.3589,1563.457 " fill="none" style="stroke:#181818;stroke-width:2.25;"/><rect fill="#EEEEEE" height="4.5" style="stroke:#EEEEEE;stroke-width:1.5;" width="1479.6533" x="0" y="201.4395"/><line style="stroke:#000000;stroke-width:1.5;" x1="0" x2="1479.6533" y1="201.4395" y2="201.4395"/><line style="stroke:#000000;stroke-width:1.5;" x1="0" x2="1479.6533" y1="205.9395" y2="205.9395"/><rect fill="#EEEEEE" height="34.6992" style="stroke:#000000;stroke-width:3.0;" width="262.4363" x="608.6085" y="185.5898"/><text fill="#000000" font-family="sans-serif" font-size="19.5" font-weight="bold" lengthAdjust="spacing" textLength="234.6475" x="617.6085" y="209.6902">Process next account</text><polygon fill="#181818" points="341.2947,260.9883,356.2947,266.9883,341.2947,272.9883,347.2947,266.9883" style="stroke:#181818;stroke-width:1.5;"/><line style="stroke:#181818;stroke-width:1.5;" x1="80.5298" x2="350.2947" y1="266.9883" y2="266.9883"/><text fill="#000000" font-family="sans-serif" font-size="19.5" lengthAdjust="spacing" textLength="208.9871" x="91.0298" y="259.3894">process next account</text><polygon fill="#181818" points="781.8545,350.0859,796.8545,356.0859,781.8545,362.0859,787.8545,356.0859" style="stroke:#181818;stroke-width:1.5;"/><line style="stroke:#181818;stroke-width:1.5;" x1="359.2947" x2="790.8545" y1="356.0859" y2="356.0859"/><text fill="#000000" font-family="sans-serif" font-size="19.5" lengthAdjust="spacing" textLength="129.5303" x="369.7947" y="303.0886">save account</text><text fill="#000000" font-family="sans-serif" font-size="19.5" lengthAdjust="spacing" textLength="129.873" x="369.7947" y="325.7878">asset change</text><text fill="#000000" font-family="sans-serif" font-size="19.5" lengthAdjust="spacing" textLength="81.6277" x="369.7947" y="348.4871">in Rocks</text><polygon fill="#181818" points="1000.043,393.7852,1015.043,399.7852,1000.043,405.7852,1006.043,399.7852" style="stroke:#181818;stroke-width:1.5;"/><line style="stroke:#181818;stroke-width:1.5;" x1="359.2947" x2="1009.043" y1="399.7852" y2="399.7852"/><text fill="#000000" font-family="sans-serif" font-size="19.5" lengthAdjust="spacing" textLength="211.4722" x="369.7947" y="392.1863">track account change</text><path d="M282.8071,422.2852 L755.0273,422.2852 L755.0273,432.9844 L740.0273,447.9844 L282.8071,447.9844 L282.8071,422.2852 " fill="#EEEEEE" style="stroke:#000000;stroke-width:2.25;"/><rect fill="none" height="69.3984" style="stroke:#000000;stroke-width:2.25;" width="1029.7573" x="282.8071" y="422.2852"/><text fill="#000000" font-family="sans-serif" font-size="19.5" font-weight="bold" lengthAdjust="spacing" textLength="404.7202" x="305.3071" y="441.8855">if epoch(msg.slot) &lt; current_epoch()</text><polygon fill="#181818" points="1232.4851,473.6836,1247.4851,479.6836,1232.4851,485.6836,1238.4851,479.6836" style="stroke:#181818;stroke-width:1.5;"/><line style="stroke:#181818;stroke-width:1.5;" x1="359.2947" x2="1241.4851" y1="479.6836" y2="479.6836"/><text fill="#000000" font-family="sans-serif" font-size="19.5" lengthAdjust="spacing" textLength="298.4795" x="369.7947" y="472.0847">mark the bucket INVALIDATED</text><rect fill="#EEEEEE" height="4.5" style="stroke:#EEEEEE;stroke-width:1.5;" width="1479.6533" x="0" y="533.0332"/><line style="stroke:#000000;stroke-width:1.5;" x1="0" x2="1479.6533" y1="533.0332" y2="533.0332"/><line style="stroke:#000000;stroke-width:1.5;" x1="0" x2="1479.6533" y1="537.5332" y2="537.5332"/><rect fill="#EEEEEE" height="34.6992" style="stroke:#000000;stroke-width:3.0;" width="269.4346" x="605.1094" y="517.1836"/><text fill="#000000" font-family="sans-serif" font-size="19.5" font-weight="bold" lengthAdjust="spacing" textLength="241.6458" x="614.1094" y="541.2839">Triggering calculation</text><path d="M15,577.3828 L129.936,577.3828 L129.936,588.082 L114.936,603.082 L15,603.082 L15,577.3828 " fill="#EEEEEE" style="stroke:#000000;stroke-width:2.25;"/><rect fill="none" height="268.3945" style="stroke:#000000;stroke-width:2.25;" width="569.7173" x="15" y="577.3828"/><text fill="#000000" font-family="sans-serif" font-size="19.5" font-weight="bold" lengthAdjust="spacing" textLength="47.436" x="37.5" y="596.9832">loop</text><polygon fill="#181818" points="183.5947,651.4805,198.5947,657.4805,183.5947,663.4805,189.5947,657.4805" style="stroke:#181818;stroke-width:1.5;"/><line style="stroke:#181818;stroke-width:1.5;" x1="80.5298" x2="192.5947" y1="657.4805" y2="657.4805"/><text fill="#000000" font-family="sans-serif" font-size="19.5" lengthAdjust="spacing" textLength="73.3916" x="91.0298" y="627.1824">get last</text><text fill="#000000" font-family="sans-serif" font-size="19.5" lengthAdjust="spacing" textLength="85.0649" x="91.0298" y="649.8816">slot num</text><path d="M143.2888,679.9805 L562.2173,679.9805 L562.2173,690.6797 L547.2173,705.6797 L143.2888,705.6797 L143.2888,679.9805 " fill="#EEEEEE" style="stroke:#000000;stroke-width:2.25;"/><rect fill="none" height="155.2969" style="stroke:#000000;stroke-width:2.25;" width="426.4285" x="143.2888" y="679.9805"/><text fill="#000000" font-family="sans-serif" font-size="19.5" font-weight="bold" lengthAdjust="spacing" textLength="351.4285" x="165.7888" y="699.5808">if epoch(slot) &gt; current_epoch()</text><line style="stroke:#181818;stroke-width:1.5;" x1="201.5947" x2="264.5947" y1="760.0781" y2="760.0781"/><line style="stroke:#181818;stroke-width:1.5;" x1="264.5947" x2="264.5947" y1="760.0781" y2="779.5781"/><line style="stroke:#181818;stroke-width:1.5;" x1="203.0947" x2="264.5947" y1="779.5781" y2="779.5781"/><polygon fill="#181818" points="218.0947,773.5781,203.0947,779.5781,218.0947,785.5781,212.0947,779.5781" style="stroke:#181818;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="19.5" lengthAdjust="spacing" textLength="99.509" x="212.0947" y="729.78">increment</text><text fill="#000000" font-family="sans-serif" font-size="19.5" lengthAdjust="spacing" textLength="136.7" x="212.0947" y="752.4792">current epoch</text><polygon fill="#181818" points="460.9189,817.2773,475.9189,823.2773,460.9189,829.2773,466.9189,823.2773" style="stroke:#181818;stroke-width:1.5;"/><line style="stroke:#181818;stroke-width:1.5;" x1="201.5947" x2="469.9189" y1="823.2773" y2="823.2773"/><text fill="#000000" font-family="sans-serif" font-size="19.5" lengthAdjust="spacing" textLength="116.3049" x="212.0947" y="815.6785">Calc(epoch)</text><rect fill="#EEEEEE" height="4.5" style="stroke:#EEEEEE;stroke-width:1.5;" width="1479.6533" x="0" y="887.127"/><line style="stroke:#000000;stroke-width:1.5;" x1="0" x2="1479.6533" y1="887.127" y2="887.127"/><line style="stroke:#000000;stroke-width:1.5;" x1="0" x2="1479.6533" y1="891.627" y2="891.627"/><rect fill="#EEEEEE" height="34.6992" style="stroke:#000000;stroke-width:3.0;" width="396.6226" x="541.5154" y="871.2773"/><text fill="#000000" font-family="sans-serif" font-size="19.5" font-weight="bold" lengthAdjust="spacing" textLength="368.8337" x="550.5154" y="895.3777">Calculation of a bucket checksum</text><polygon fill="#181818" points="639.2937,946.6758,654.2937,952.6758,639.2937,958.6758,645.2937,952.6758" style="stroke:#181818;stroke-width:1.5;"/><line style="stroke:#181818;stroke-width:1.5;" x1="478.9189" x2="648.2937" y1="952.6758" y2="952.6758"/><text fill="#000000" font-family="sans-serif" font-size="19.5" lengthAdjust="spacing" textLength="142.3748" x="489.4189" y="945.0769">read next cmd</text><polygon fill="#181818" points="673.7937,990.375,658.7937,996.375,673.7937,1002.375,667.7937,996.375" style="stroke:#181818;stroke-width:1.5;"/><line style="stroke:#181818;stroke-width:1.5;" x1="664.7937" x2="1016.543" y1="996.375" y2="996.375"/><text fill="#000000" font-family="sans-serif" font-size="19.5" lengthAdjust="spacing" textLength="137.7092" x="682.7937" y="988.7761">fetch changes</text><line style="stroke:#181818;stroke-width:1.5;" x1="657.2937" x2="720.2937" y1="1062.7734" y2="1062.7734"/><line style="stroke:#181818;stroke-width:1.5;" x1="720.2937" x2="720.2937" y1="1062.7734" y2="1082.2734"/><line style="stroke:#181818;stroke-width:1.5;" x1="658.7937" x2="720.2937" y1="1082.2734" y2="1082.2734"/><polygon fill="#181818" points="673.7937,1076.2734,658.7937,1082.2734,673.7937,1088.2734,667.7937,1082.2734" style="stroke:#181818;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="19.5" lengthAdjust="spacing" textLength="63.2607" x="667.7937" y="1032.4753">group,</text><text fill="#000000" font-family="sans-serif" font-size="19.5" lengthAdjust="spacing" textLength="121.5608" x="667.7937" y="1055.1746">calc buckets</text><polygon fill="#181818" points="1232.4851,1119.9727,1247.4851,1125.9727,1232.4851,1131.9727,1238.4851,1125.9727" style="stroke:#181818;stroke-width:1.5;"/><line style="stroke:#181818;stroke-width:1.5;" x1="657.2937" x2="1241.4851" y1="1125.9727" y2="1125.9727"/><text fill="#000000" font-family="sans-serif" font-size="19.5" lengthAdjust="spacing" textLength="345.2109" x="667.7937" y="1118.3738">INVALIDATE corresponding buckets</text><polygon fill="#181818" points="1374.3589,1163.6719,1389.3589,1169.6719,1374.3589,1175.6719,1380.3589,1169.6719" style="stroke:#181818;stroke-width:1.5;"/><line style="stroke:#181818;stroke-width:1.5;" x1="657.2937" x2="1383.3589" y1="1169.6719" y2="1169.6719"/><text fill="#000000" font-family="sans-serif" font-size="19.5" lengthAdjust="spacing" textLength="408.4907" x="667.7937" y="1162.073">INVALIDATE corresponding grand buckets</text><polygon fill="#181818" points="1117.0305,1207.3711,1132.0305,1213.3711,1117.0305,1219.3711,1123.0305,1213.3711" style="stroke:#181818;stroke-width:1.5;"/><line style="stroke:#181818;stroke-width:1.5;" x1="657.2937" x2="1126.0305" y1="1213.3711" y2="1213.3711"/><text fill="#000000" font-family="sans-serif" font-size="19.5" lengthAdjust="spacing" textLength="319.4934" x="667.7937" y="1205.7722">update account with last change</text><polygon fill="#181818" points="673.7937,1251.0703,658.7937,1257.0703,673.7937,1263.0703,667.7937,1257.0703" style="stroke:#181818;stroke-width:1.5;"/><line style="stroke:#181818;stroke-width:1.5;" x1="664.7937" x2="1133.5305" y1="1257.0703" y2="1257.0703"/><text fill="#000000" font-family="sans-serif" font-size="19.5" lengthAdjust="spacing" textLength="372.3091" x="682.7937" y="1249.4714">iterate accounts for buckets to re-calc</text><line style="stroke:#181818;stroke-width:1.5;" x1="657.2937" x2="720.2937" y1="1323.4688" y2="1323.4688"/><line style="stroke:#181818;stroke-width:1.5;" x1="720.2937" x2="720.2937" y1="1323.4688" y2="1342.9688"/><line style="stroke:#181818;stroke-width:1.5;" x1="658.7937" x2="720.2937" y1="1342.9688" y2="1342.9688"/><polygon fill="#181818" points="673.7937,1336.9688,658.7937,1342.9688,673.7937,1348.9688,667.7937,1342.9688" style="stroke:#181818;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="19.5" lengthAdjust="spacing" textLength="111.4014" x="667.7937" y="1293.1707">calc bucket</text><text fill="#000000" font-family="sans-serif" font-size="19.5" lengthAdjust="spacing" textLength="108.7639" x="667.7937" y="1315.8699">checksums</text><polygon fill="#181818" points="1232.4851,1380.668,1247.4851,1386.668,1232.4851,1392.668,1238.4851,1386.668" style="stroke:#181818;stroke-width:1.5;"/><line style="stroke:#181818;stroke-width:1.5;" x1="657.2937" x2="1241.4851" y1="1386.668" y2="1386.668"/><text fill="#000000" font-family="sans-serif" font-size="19.5" lengthAdjust="spacing" textLength="219.575" x="667.7937" y="1379.0691">Set buckets checksum</text><polygon fill="#181818" points="1374.3589,1424.3672,1389.3589,1430.3672,1374.3589,1436.3672,1380.3589,1430.3672" style="stroke:#181818;stroke-width:1.5;"/><line style="stroke:#181818;stroke-width:1.5;" x1="657.2937" x2="1383.3589" y1="1430.3672" y2="1430.3672"/><text fill="#000000" font-family="sans-serif" font-size="19.5" lengthAdjust="spacing" textLength="282.8547" x="667.7937" y="1422.7683">Set grand buckets checksum</text><polygon fill="#181818" points="1000.043,1468.0664,1015.043,1474.0664,1000.043,1480.0664,1006.043,1474.0664" style="stroke:#181818;stroke-width:1.5;"/><line style="stroke:#181818;stroke-width:1.5;" x1="657.2937" x2="1009.043" y1="1474.0664" y2="1474.0664"/><text fill="#000000" font-family="sans-serif" font-size="19.5" lengthAdjust="spacing" textLength="324.7493" x="667.7937" y="1466.4675">delete processed change records</text><!--SRC=[ZLHDYzim4BtxLmmvRQ1PwA6Nibd89gKib5AQq5EWJEI9RM9BhYHlz-Ttz9NOQoTRdwpHl2UzDpCo0ck2Z_UViZyTTGIphQfHubxcQ746Q204TXgbGM4h9KrsKAzGoOAC9Pq1Vq99grLzGMz9lrI2UWGnujDRrBOILOlImcmbXEgatSiVMWaoHccFYk5pq0FZ7PlM29_aViQCwvB4oNJDNgwn5bsDDdAc3HVEIER0GhoOduhZcoTFvOGVqF0nAsF86XR3U2o2c12BaRVvIOaeqRcJTAp3ybfsZSQ2iMWf0RPkSItzq8aJNo7bFeNbjUo2wyOwXvYlBfY0oOTikOJeDaXwjO210vRBB1it0ImUHpM2pz1EC6IZF8Vj6yb0Wo-K07k9RXU2ZtjPoL2XQQApmSnYDOhJ-UO1dnLQTIrKHw1MYVAkCSMzgPMTmmE8JckIzdVOcNiNhnmI_U936jGdi2L5M-7v-w_Lj-VDQlTbuztqvta_Txeg2j8yAo1YAx9ttj5QgVQAhOE1uVCAFiCroLwwQuFichUIWfp7IJb3jWdwIWfD3Vd63VZ0Eers8ySWDq9tFctUq-p-l30dVjrJh8w0oIuHfz3RuEcOjZ-QJAy9yz13eicpRB3xi1ZM_4XMbB7MPfWw9lRt_C1AtJAEnGWpgFQbklpCiJscLJ9t5Rs1xW_OBOh1T4uH-PU06ResTp-fiVzMjlGjaLfymg04hVYHxc4D7Bcbuv5W5LkzS6QyPrpFCFV0XRrthDjojTD92V8VTZdOm9cRu4iZv5GJ2urF4ENH75R8hkVc7m00]--></g></svg>